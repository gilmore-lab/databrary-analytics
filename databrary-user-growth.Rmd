---
title: "databrary-user-growth"
author: "Andrea R. Seisler"
date: '`r Sys.time()`'
output:
  html_document:
    code_folding: show
    self_contained: no
    toc: yes
    toc_depth: 3
    toc_float: yes
  github_document: default
---
## Background

This document contains data and graphs related to Databrary institution and user growth.

## Load Libraries

```{r load-libraries}
#Load Libraries
library(ggplot2)
library(reshape2)
library(dplyr)
library(knitr)
```

## Import data

Here we import the data file found in `csv/institutionAuthCounts.csv`, include `YearMonth`, `Institutions`, and `Authorized Investigators` in dataframe (df).   

```{r import-data}
# Import data and clean

df <- read.csv(file = "csv/institutionAuthCounts.csv", header = TRUE)

# Remove extra characters from df$YearMonth
df$YearMonth <- as.Date(substr(df$YearMonth, 2, 11))
df$Year <- substr(df$YearMonth, 1, 4)
df$Month <- as.numeric(substr(df$YearMonth, 6, 7))
```

## Plot of User Growth

Here we plot all authorized Institutions and Investigators vs. date

```{r p-user-growth-plot, include=TRUE}

# Plot for all Institutions and Authorized Investigators vs. date

# the below code needs to be changed to geom_line

# Reshape df
df.melt <- melt(df, id = c("YearMonth", "Year", "Month"), value.name = "Count", variable.name = "Type")

# Using Points
p <- 
  ggplot(data=df.melt, aes(x = YearMonth, y = Count, color = Type, group = Type)) +
  geom_point() + 
  geom_line(size=3) +
  theme_classic() +
  #scale_colour_manual(values=c("black", "orange")) +  # What colors do we want to use?
  ylab("Counts") +
  xlab("Date") +
  #labs(title="Databrary User Growth") +
  theme(legend.title=element_blank()) +
  scale_y_continuous(breaks = c(50,100,150,200,250,300,350,400,450,500,550,600,650,700,750))
  # To Do: Change x labels so they are readable and only every year
  #scale_x_continuous(breaks=seq(df$YearMonth[1],df$YearMonth[46], 12))
p
```

## Questions

#### How do I create the pretty file with the code and plots so it is viewable?
  - Knit to github document?
