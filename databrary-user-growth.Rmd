---
title: "databrary-user-growth"
author: "Andrea R. Seisler"
date: "`r Sys.time()`"
output: 
  html_document:
  self_contained: false
code_folding: show
toc: true
toc_depth: 3
toc_float: true
dpi: 300
dev: pdf
github_document: default
---
## Background

This document contains data and graphs related to Databrary institution and user growth.

## Load Libraries

```{r load-libraries}
#Load Libraries
library(ggplot2)
library(reshape2)
library(dplyr)
library(knitr)
```

## Import data

Here we import the data file found in `csv/institutionAuthCounts.csv`, include `YearMonth`, `Institutions`, and `Authorized Investigators` in dataframe (df).   

```{r import-data}
# Import data and clean

df <- read.csv(file = "csv/institutionAuthCounts.csv", header = TRUE)

# Remove extra characters from df$YearMonth
df$YearMonth <- substr(df$YearMonth, 2, 8)

```

## Plot of User Growth

Here we plot all authorized Institutions and Investigators vs. date

```{r p-user-growth-plot, include=TRUE}

# Plot for all Institutions and Authorized Investigators vs. date

# the below code needs to be changed to geom_line

# Reshape df
df.melt <- melt(df, id = "YearMonth")

# Using Points
p <- 
  ggplot(data=df.melt, aes(x= YearMonth, y = value, color = variable)) +
  geom_point() +  
  theme_classic() +
  scale_colour_manual(values=c("black", "orange")) +
  ylab("#Users") +
  xlab("Date") +
  labs(title="Databrary User Growth") +
  scale_y_continuous(limits = c(0, 800)) #+
  #scale_x_continuous(breaks=seq(df$YearMonth[1],df$YearMonth[46], 12))
p

# Using geom_line - not working as expected 
p2 <- 
  ggplot(data=df.melt, aes(x= YearMonth, y = value)) +
  geom_line() +
  scale_colour_manual(values=c("black", "orange")) +
  theme_classic() +
  ylab("#Users") +
  xlab("Date") +
  labs(title="Databrary User Growth")

p2
  
  
```